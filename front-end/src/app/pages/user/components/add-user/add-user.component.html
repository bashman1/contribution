<app-card [title]="'Add User'">
    <p-messages [closable]="true" key="message"></p-messages>
    <form (ngSubmit)="addUser()" [formGroup]="userForm">
        <div class="formgrid grid">
            <div class="field col-6 md:col-12">
                <label for="first_name">First Name</label>
                <input (blur)="validateUserForm()" class="inputfield w-full" formControlName="first_name"
                       id="first_name"
                       pInputText type="text">
                <span *ngIf="formErrors.first_name"
                      class="text-danger text-left">{{ formErrors.first_name }}</span>
            </div>
            <div class="field col-6 md:col-12">
                <label for="last_name">Last Name</label>
                <input (blur)="validateUserForm()" class="inputfield w-full" formControlName="last_name" id="last_name"
                       pInputText type="text">
                <span *ngIf="formErrors.last_name"
                      class="text-danger text-left">{{ formErrors.last_name }}</span>
            </div>
            <div class="field col-6 md:col-12">
                <label for="phone">Phone</label>
                <input (blur)="validateUserForm()" class="inputfield w-full" formControlName="phone" id="phone"
                       pInputText
                       type="text">
                <span *ngIf="formErrors.phone"
                      class="text-danger text-left">{{ formErrors.phone }}</span>
            </div>
            <div class="field col-6 md:col-12">
                <label for="email">Email</label>
                <input (blur)="validateUserForm()" class="inputfield w-full" formControlName="email" id="email"
                       pInputText
                       type="text">
                <span *ngIf="formErrors.email"
                      class="text-danger text-left">{{ formErrors.email }}</span>
            </div>
            <div *ngIf="!user.userData.scheme_id" class="field col-6 md:col-12">
                <p-dropdown (onChange)="getUserRoles()" [filter]="true" [options]="schemes" [showClear]="true"
                            [style]="{'display': 'flex'}" dataKey="id"
                            filterBy="name"
                            formControlName="scheme_id" optionLabel="name" optionValue="id"
                            placeholder="Select a Scheme">
                    <ng-template let-company pTemplate="item">
                        <div>{{company.name}}</div>
                    </ng-template>
                </p-dropdown>
                <span *ngIf="formErrors.company_id"
                      class="text-danger text-left">{{ formErrors.company_id }}</span>
            </div>

            <div class="field col-6 md:col-12">
                <p-dropdown [filter]="true" [options]="roles" [showClear]="true" [style]="{'display': 'flex'}"
                            dataKey="id" filterBy="name"
                            formControlName="role_id" optionLabel="name" optionValue="id" placeholder="Select a Role">
                    <ng-template let-role pTemplate="item">
                        <div>{{role.name}}</div>
                    </ng-template>
                </p-dropdown>
                <span *ngIf="formErrors.role_id"
                      class="text-danger text-left">{{ formErrors.role_id }}</span>
            </div>

        </div>
        <div class="formgrid grid submit">
            <p-button [disabled]="userForm.invalid" icon="pi pi-check" iconPos="right" label="Submit"
                      type="submit"></p-button>
        </div>
    </form>
</app-card>
